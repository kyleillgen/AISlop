<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Robot Rabbit vs Carrot Drone</title>
  <style>
    canvas { background: #f0f0f0; display: block; margin: 0 auto; }
  </style>
</head>
<body>
<canvas id="game" width="400" height="400"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const player = {x:200, y:200, size:20, color:'gray', speed:2, invisible:0};
const enemy = {x:350, y:350, size:20, color:'orange', speed:1.6};
let keys = {};

document.addEventListener('keydown', e => {
  keys[e.key] = true;
  if (e.key === 'r') {
    player.invisible = 120; // hidden cloak ability
  }
});

document.addEventListener('keyup', e => { keys[e.key] = false; });

function update() {
  if (keys['ArrowUp']) player.y -= player.speed;
  if (keys['ArrowDown']) player.y += player.speed;
  if (keys['ArrowLeft']) player.x -= player.speed;
  if (keys['ArrowRight']) player.x += player.speed;

  player.x = Math.max(0, Math.min(380, player.x));
  player.y = Math.max(0, Math.min(380, player.y));

  if (player.invisible > 0) {
    player.invisible--;
  } else {
    const dx = player.x - enemy.x;
    const dy = player.y - enemy.y;
    const dist = Math.hypot(dx, dy);
    enemy.x += (dx / dist) * enemy.speed;
    enemy.y += (dy / dist) * enemy.speed;
  }

  ctx.clearRect(0,0,400,400);
  ctx.fillStyle = player.invisible>0 ? 'lightgray' : player.color;
  ctx.fillRect(player.x, player.y, player.size, player.size);
  ctx.fillStyle = enemy.color;
  ctx.fillRect(enemy.x, enemy.y, enemy.size, enemy.size);

  requestAnimationFrame(update);
}
update();
</script>
</body>
</html>
