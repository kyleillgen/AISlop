<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Sprite Sorter</title>
  <style>
    body { text-align: center; font-family: sans-serif; background-color: #f0f8ff; }
    #game { display: flex; align-items: center; justify-content: center; }
    #playfield { width: 400px; height: 300px; margin: 20px; border: 2px dashed #aaa; display: flex; align-items: center; justify-content: center; background: white; }
    #creature { font-size: 64px; transition: transform 0.5s; display: inline-block; }
    #stats { margin-top: 10px; }
    .basket { font-size: 48px; margin: 0 20px; }
    .cry { animation: shake 0.5s; }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
      100% { transform: translateX(0); }
    }
  </style>
</head>
<body>
  <h1>Sprite Sorter</h1>
  <div id="game">
    <div id="leftBasket" class="basket">ðŸ§º</div>
    <div id="playfield"><span id="creature"></span></div>
    <div id="rightBasket" class="basket">ðŸ§º</div>
  </div>
  <div id="stats">Combo: 0 | High Combo: 0</div>
  <div>Press â†‘ for Goblin, â†“ for Faerie</div>
  <script>
    const creatures = [
      { emoji: 'ðŸ§Œ', key: 'ArrowUp', basket: 'left' },
      { emoji: 'ðŸ§š', key: 'ArrowDown', basket: 'right' }
    ];
    let current = null;
    let comboString = '';
    let highCombo = parseInt(localStorage.getItem('spriteHighCombo'), 10) || 0;
    let spawnTime = 0;

    function spawn() {
      current = creatures[Math.floor(Math.random() * creatures.length)];
      const creatureEl = document.getElementById('creature');
      creatureEl.textContent = current.emoji;
      creatureEl.className = '';
      creatureEl.style.transform = '';
      spawnTime = performance.now();
    }

    function updateStats() {
      document.getElementById('stats').textContent = 'Combo: ' + comboString.length + ' | High Combo: ' + highCombo;
    }

    function handleResult(correct) {
      const creatureEl = document.getElementById('creature');
      if (correct) {
        const x = current.basket === 'left' ? -200 : 200;
        creatureEl.style.transform = `translate(${x}px, -200px) scale(0.5)`;
        setTimeout(() => {
          creatureEl.style.transform = '';
          spawn();
        }, 500);
      } else {
        creatureEl.textContent = 'ðŸ˜¢';
        creatureEl.classList.add('cry');
        setTimeout(() => {
          creatureEl.classList.remove('cry');
          spawn();
        }, 500);
      }
    }

    document.addEventListener('keydown', e => {
      if (!current) return;
      const now = performance.now();
      if (e.key === current.key) {
        if (now - spawnTime <= 1000) {
          comboString += e.key === 'ArrowUp' ? 'U' : 'D';
          handleResult(true);
        } else {
          comboString = '';
          handleResult(false);
        }
      } else if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
        comboString = '';
        handleResult(false);
      } else {
        return;
      }
      if (comboString.length > highCombo) {
          highCombo = comboString.length;
          localStorage.setItem('spriteHighCombo', highCombo);
      }
      updateStats();
    });

    updateStats();
    spawn();
  </script>
</body>
</html>

